<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qtilities: Qtilities::Core::FileLocker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_qtilities.html">Qtilities</a></li><li class="navelem"><a class="el" href="namespace_qtilities_1_1_core.html">Core</a></li><li class="navelem"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html">FileLocker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Qtilities::Core::FileLocker Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html" title="The FileLocker class provides a simple mechanism to create and manage file locking using a ...">FileLocker</a> class provides a simple mechanism to create and manage file locking using a .lck file with lock information.  
 <a href="class_qtilities_1_1_core_1_1_file_locker.html#details">More...</a></p>

<p><code>#include &lt;FileLocker.h&gt;</code></p>

<p><a href="class_qtilities_1_1_core_1_1_file_locker-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae5218b1a9039b3547c9a534eb95fe666"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#ae5218b1a9039b3547c9a534eb95fe666">FileLocker</a> (const QString &amp;lock_extension=&quot;lck&quot;)</td></tr>
<tr class="memdesc:ae5218b1a9039b3547c9a534eb95fe666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#ae5218b1a9039b3547c9a534eb95fe666"></a><br/></td></tr>
<tr class="memitem:a34cdad763ba78f6e873ff84af2f7d882"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34cdad763ba78f6e873ff84af2f7d882"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#a34cdad763ba78f6e873ff84af2f7d882">isFileLocked</a> (const QString &amp;file_path) const </td></tr>
<tr class="memdesc:a34cdad763ba78f6e873ff84af2f7d882"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the given file is locked. <br/></td></tr>
<tr class="memitem:a604f100da2a93fe8f89ddf670cf011c7"><td class="memItemLeft" align="right" valign="top">virtual QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#a604f100da2a93fe8f89ddf670cf011c7">lastLockDateTime</a> (QString file_path, QString *errorMsg=0) const </td></tr>
<tr class="memdesc:a604f100da2a93fe8f89ddf670cf011c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the date and time when a lock was created.  <a href="#a604f100da2a93fe8f89ddf670cf011c7"></a><br/></td></tr>
<tr class="memitem:ad599d6995fae48927a69aa979790de45"><td class="memItemLeft" align="right" valign="top">virtual QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#ad599d6995fae48927a69aa979790de45">lastLockHostName</a> (QString file_path, QString *errorMsg=0) const </td></tr>
<tr class="memdesc:ad599d6995fae48927a69aa979790de45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the host name that was used to lock a file.  <a href="#ad599d6995fae48927a69aa979790de45"></a><br/></td></tr>
<tr class="memitem:aeca761514992a62afa8b8d9181c92fb3"><td class="memItemLeft" align="right" valign="top">virtual QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#aeca761514992a62afa8b8d9181c92fb3">lastLockSummary</a> (QString file_path, const QString &amp;line_break_char=&quot;\n&quot;, QString *errorMsg=0) const </td></tr>
<tr class="memdesc:aeca761514992a62afa8b8d9181c92fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a lock summary string for a lock on a file.  <a href="#aeca761514992a62afa8b8d9181c92fb3"></a><br/></td></tr>
<tr class="memitem:aa51ecedf01e68f0e4705200f38f4bd22"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#aa51ecedf01e68f0e4705200f38f4bd22">lockFile</a> (const QString &amp;file_path, QString *errorMsg=0)</td></tr>
<tr class="memdesc:aa51ecedf01e68f0e4705200f38f4bd22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks a file.  <a href="#aa51ecedf01e68f0e4705200f38f4bd22"></a><br/></td></tr>
<tr class="memitem:a5390b174a88327dee4a58c86e2ca41c8"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html#a5390b174a88327dee4a58c86e2ca41c8">unlockFile</a> (const QString &amp;file_path, QString *errorMsg=0)</td></tr>
<tr class="memdesc:a5390b174a88327dee4a58c86e2ca41c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks a file.  <a href="#a5390b174a88327dee4a58c86e2ca41c8"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_qtilities_1_1_core_1_1_file_locker.html" title="The FileLocker class provides a simple mechanism to create and manage file locking using a ...">FileLocker</a> class provides a simple mechanism to create and manage file locking using a .lck file with lock information. </p>
<p>The .lck file created when locking a file will contain the date and time that the lock was created, as well as the hostname of the computer used to lock the file.</p>
<p><em>This class was added in Qtilities v1.2.</em> </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae5218b1a9039b3547c9a534eb95fe666"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileLocker::FileLocker </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>lock_extension</em> = <code>&quot;lck&quot;</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">lock_extension</td><td>The file extension to use for lock files. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a604f100da2a93fe8f89ddf670cf011c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString FileLocker::lastLockDateTime </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString *&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the date and time when a lock was created. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_path</td><td>The path of the file that is locked, not the lock file itself. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>When valid, will be populated with error message if the function fails. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The last lock date and time. </dd></dl>

</div>
</div>
<a class="anchor" id="ad599d6995fae48927a69aa979790de45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString FileLocker::lastLockHostName </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString *&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the host name that was used to lock a file. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_path</td><td>The path of the file that is locked, not the lock file itself. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>When valid, will be populated with error message if the function fails. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The last lock host name. </dd></dl>

</div>
</div>
<a class="anchor" id="aeca761514992a62afa8b8d9181c92fb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString FileLocker::lastLockSummary </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>line_break_char</em> = <code>&quot;\n&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString *&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Provides a lock summary string for a lock on a file. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_path</td><td>The path of the file that is locked, not the lock file itself. </td></tr>
    <tr><td class="paramname">line_break_char</td><td>The line break characters to use in the summary text. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>When valid, will be populated with error message if the function fails. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The last lock summary. </dd></dl>

</div>
</div>
<a class="anchor" id="aa51ecedf01e68f0e4705200f38f4bd22"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool FileLocker::lockFile </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString *&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks a file. </p>
<p>This function will create a .lck file with the same name as the file name provided. If the file is already locked, or the .lck file can't be created for some reason, it will return false and set the errorMsg parameter to the reason why the lock failed.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_path</td><td>The path of the file that must be locked. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>When valid, will be populated with error message if the function fails. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>True if successfull, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a5390b174a88327dee4a58c86e2ca41c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool FileLocker::unlockFile </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>file_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString *&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks a file. </p>
<p>This function will look for a .lck file with the same name as the file name provided. If the file exists, it means that the file was locked and this function will attempt to lock it. If the <code></code>.lck file can't be removed for some reason, it will return false and set the errorMsg parameter to the reason why the lock failed.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_path</td><td>The path of the file that must be locked. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>When valid, will be populated with error message if the function fails. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>True if successfull, false otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<br><br>
<table style="table-layout:auto; margin: auto; border-width:0px 0px 0px 0px; border-color:#7F7F7F; width:99%; border-style:solid" CELLPADDING=5 RULES=ROWS FRAME=HSIDES>
<tr>
<td style="vertical-align:text-top;align:left;width:45%">
<a href="https://github.com/JPNaude/Qtilities" title="Qtilities Repository">Qtilities</a> : <a href="index.html" title="Go back to index">Reference Documentation</a>
</td>
<td align="center" style="vertical-align:text-top;align:center;width10%">
<a href="#top" title="Back to top">Back to top</a>
</td>
<td style="vertical-align:text-top;text-align:right;width:45%">
Copyright &copy; 2009-2013, Jaco Naud√©
<br><br>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="VJCCMP7GUHDVA">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</td>
</table>
<br>
<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-17785825-1']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>
